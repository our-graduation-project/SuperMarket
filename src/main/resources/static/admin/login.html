<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
    
    <title>管理员登录</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="main-wrapper account-wrapper">
        <div class="account-page">
			<div class="account-center">
				<div class="account-box">
                    <form>
						<div class="account-logo">
                            <a href="index.html"><img src="../img/logo-dark.png" alt=""></a>
                        </div>
                        <div class="form-group">
                            <label>用户邮箱</label>
                            <input type="text" id="email" autofocus="" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>密码</label>
                            <input type="password" id="adminPassword" class="form-control">
                        </div>
                        <div class="form-group text-right">
                            <a href="forgot-password.html">忘记密码？</a>
                        </div>
                        <div class="form-group text-center">
                            <button class="btn btn-primary account-btn" onclick="loginAdmin()">登录</button>
                        </div>
                        <div class="text-center register-link">
                                                                                 没有一个账户吗? <a href="register.html">现在注册</a>
                        </div>
                    </form>
                </div>
			</div>
        </div>
    </div>
    <script src="../js/jquery-3.2.1.min.js"></script>
	<script src="../js/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/app.js"></script>
    <script src="../plugins/js/public.js"></script>
    <script >
        /**
         * 管理员登录
         * @returns {boolean}
         */
        function loginAdmin(){
            var email = $('#email').val();
            var adminPassword = $('#adminPassword').val();

            console.log(email + "----" + adminPassword);

            if(isNull(email) || isNull(adminPassword)){
                alert("邮箱或密码不能为空！");
            }else{
                var data = {"email": email,"password":adminPassword};

                $.ajax({
                    //请求方式
                    type : "POST",
                    //请求的媒体类型
                    contentType: "application/json;charset=UTF-8",
                    //请求地址
                    url : "http://localhost:8080/supermarket/admin/loginadmin",
                    //数据，json字符串
                    data : JSON.stringify(data),
                    success: function (result) {
                        if (result.result) {
                            alert("登录成功");
                            window.location.href = "http://localhost:8080/supermarket/admin/index.html";
                        }else{
                            alert(result.message);
                        }
                    },
                    error: function () {
                        alert("操作失败");
                    }

                })
            }
        }
    </script>
</body>

</html>