<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">

    <title>忘记密码</title>
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <!--[if lt IE 9]>
    <script src="../js/html5shiv.min.js"></script>
    <script src="../js/respond.min.js"></script>
    <![endif]-->
</head>

<body>
<div class="main-wrapper account-wrapper">
    <div class="account-page">
        <div class="account-center">
            <div class="account-box">
                <form >
                    <div class="account-logo">
                        <a href="index.html"><img src="../img/logo-dark.png" alt=""></a>
                    </div>
                    <div class="form-group">
                        <div class="form-group">
                            <label>原密码</label>
                            <input style="color: #0062CC;" id="old-password" type="text" class="form-control" autofocus>
                        </div>
                        <div class="form-group">
                            <label>新密码</label>
                            <input style="color: #0062CC;" id="new-password" type="text" class="form-control" autofocus>
                        </div>
                        <div class="form-group">
                            <label>确认密码</label>
                            <input style="color: #0062CC;" id="comfir-password" type="text" class="form-control" autofocus>
                        </div>
                        <div class="text-center register-link">
                            <button class="btn-block" onclick="modify()">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="../js/jquery-3.2.1.min.js"></script>
<script src="../js/popper.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script src="../js/app.js"></script>
<script>
    function modify(){
        newPassword = $(" #new-password ").val();
        comfirPassword = $(" #comfir-password ").val();
        oldPassword = $(" #old-password ").val();
        if(newPassword !== comfirPassword){
            alert("两次输入新密码不相同！");
        }else{
            let data = {"newPassword":newPassword,"oldPassword":oldPassword};
            $.ajax({
                //请求方式
                type : "POST",
                //请求的媒体类型
                contentType: "application/json;charset=UTF-8",
                //请求地址
                url : "http://localhost:8080/supermarket/admin/updatepassword",
                //数据，json字符串
                data : JSON.stringify(data),
                success: function (result) {
                    if (result.result) {
                        alert("修改成功！");
                    }
                    else {
                        alert("修改失败..  ！");
                    }
                },
                error: function () {
                    alert("操作失败");
                }

            });
        }
    }
</script>
</body>

</html>